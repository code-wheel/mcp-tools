<h2>MCP Tools</h2>

<p><strong>MCP Tools</strong> connects Drupal to AI assistants (Claude, Cursor, Windsurf) via the <a href="https://modelcontextprotocol.io">Model Context Protocol</a>. Describe what you want in plain English — the AI handles the Drupal work.</p>

<p><strong>Example</strong></p>
<code>You: "Create a blog with articles, categories, tags, and an editor role"
AI:  Creates the content type, taxonomies, fields, role, and permissions</code>

<h3>Quick Start</h3>
<ol>
<li><strong>Install:</strong><br/>
<code>composer require drupal/mcp_tools</code><br/>
<code>drush en mcp_tools -y</code>
</li>
<li><strong>Configure:</strong> Visit <code>/admin/config/services/mcp-tools</code> and choose a preset:
<ul>
<li><strong>Development:</strong> Full access, no rate limiting</li>
<li><strong>Staging:</strong> Config-only mode, rate limited, audit logging</li>
<li><strong>Production:</strong> Read-only mode, strict limits, full audit trail</li>
</ul>
</li>
<li><strong>Connect your AI tool:</strong> See transport options below</li>
</ol>

<h3>Option A: STDIO Transport (Recommended for Local)</h3>
<p>Enable the STDIO module:</p>
<code>drush en mcp_tools_stdio -y</code>

<p><strong>Generate config automatically:</strong></p>
<code>drush mcp-tools:client-config > .mcp.json</code>
<p>Detects DDEV/Lando environments and outputs ready-to-use config. Use <code>--scope=read</code> for read-only.</p>

<p><strong>Claude Code (run from your Drupal directory):</strong></p>
<code>cd /path/to/drupal
claude mcp add --scope project drupal -- drush mcp-tools:serve --quiet --uid=1 --scope=read,write</code>

<p><strong>Or add <code>.mcp.json</code> to your Drupal project root:</strong></p>
<code>{
  "mcpServers": {
    "drupal": {
      "command": "drush",
      "args": ["mcp-tools:serve", "--quiet", "--uid=1", "--scope=read,write"]
    }
  }
}</code>

<h3>Option B: HTTP Transport (Remote/Docker)</h3>
<p>Enable the remote module:</p>
<code>drush en mcp_tools_remote -y</code>

<p><strong>Configure execution user:</strong> Visit <code>/admin/config/services/mcp-tools/remote</code></p>
<ul>
<li><strong>Quick setup:</strong> Check "Use site admin (uid 1)" — simple for development</li>
<li><strong>Production:</strong> Click "Create MCP Executor Account" for a dedicated service account</li>
</ul>

<p><strong>Generate an API key:</strong></p>
<code>drush mcp-tools:remote-key-create --label="Claude" --scopes=read,write</code>

<p>Copy the key shown (it's only displayed once).</p>

<p><strong>Claude Code one-liner:</strong></p>
<code>claude mcp add drupal http://localhost:8080/_mcp_tools --transport http -H "Authorization: Bearer YOUR_API_KEY"</code>

<p><strong>Or add to <code>.mcp.json</code>:</strong></p>
<code>{
  "mcpServers": {
    "drupal": {
      "type": "http",
      "url": "http://localhost:8080/_mcp_tools",
      "headers": {
        "Authorization": "Bearer YOUR_API_KEY"
      }
    }
  }
}</code>

<p>Manage keys at <code>/admin/config/services/mcp-tools/remote</code> or via <code>drush mcp-tools:remote-key-list</code>.</p>

<h3>What's Included</h3>
<p><strong>222 tools</strong> across 34 optional submodules:</p>
<ul>
<li><strong>Site Building:</strong> Content types, fields, taxonomies, roles, permissions, menus</li>
<li><strong>Content:</strong> Create/edit/publish nodes, media, bulk operations</li>
<li><strong>Views &amp; Layout:</strong> Views, blocks, Layout Builder, image styles</li>
<li><strong>Admin:</strong> Cache, cron, config management, security audits</li>
</ul>

<h3>Security</h3>
<ul>
<li>Scoped access (read/write/admin per connection)</li>
<li>Read-only and config-only modes</li>
<li>Rate limiting and audit logging</li>
<li>Designed for local development — remote access is optional</li>
</ul>

<h3>Requirements</h3>
<ul>
<li>Drupal 10.3+ or 11</li>
<li><a href="https://www.drupal.org/project/tool">Tool API</a> module</li>
<li>PHP 8.3+</li>
</ul>

<h3>Links</h3>
<p>
<a href="https://github.com/code-wheel/mcp-tools">GitHub</a> ·
<a href="https://github.com/code-wheel/mcp-tools/blob/master/docs/CLAUDE_CODE_EXAMPLES.md">Claude Code Examples</a> ·
<a href="https://www.drupal.org/project/issues/mcp_tools">Issue Queue</a>
</p>
