#!/bin/bash

## Description: Set up mcp_tools module for testing
## Usage: setup-module
## Example: "ddev setup-module"

echo "Setting up mcp_tools module..."

# Symlink the module into contrib
ddev exec bash -c 'mkdir -p web/modules/contrib && rm -rf web/modules/contrib/mcp_tools && ln -sf /var/www/html web/modules/contrib/mcp_tools'

# Install dependencies (mcp_server and tool modules would need to be available)
echo "Note: You need mcp_server and tool modules installed for full testing"
echo "For unit tests only, you can proceed without them"

# Try to enable the module
ddev drush en mcp_tools -y 2>/dev/null || echo "Module dependencies not met - unit tests will still work"

echo ""
echo "Setup complete! Run tests with: ddev test"
echo "Or run specific test: ddev test AccessManager"
