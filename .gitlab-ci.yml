################
# GitLabCI template for Drupal projects.
#
# Uses centrally maintained DrupalCI templates from the Drupal Association.
# Documentation: https://project.pages.drupalcode.org/gitlab_templates/
################

include:
  - project: $_GITLAB_TEMPLATES_REPO
    ref: $_GITLAB_TEMPLATES_REF
    file:
      - '/includes/include.drupalci.main.yml'
      - '/includes/include.drupalci.variables.yml'
      - '/includes/include.drupalci.workflows.yml'

variables:
  _CSPELL_WORDS: 'jsonrpc, modelcontextprotocol, stdio'
  SKIP_STYLELINT: 1
  SKIP_ESLINT: 1
  # Avoid hard failures on missing extensions in DrupalCI images (e.g. ext-sodium).
  COMPOSER_IGNORE_PLATFORM_REQS: 1

  # Broaden coverage across supported environments.
  OPT_IN_TEST_PREVIOUS_MAJOR: 1
  OPT_IN_TEST_NEXT_MINOR: 1
  OPT_IN_TEST_MAX_PHP: 1

  # This project requires PHP 8.3+; ensure the previous major tests use >= 8.3.
  CORE_PREVIOUS_PHP_MIN: 8.3
